<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ajax post 방식</title>
</head>

<body>
    <form id="id_form">
        이름<input type="text" name="nm_name" value="임선영"><br>
        별명1<input type="text" name="nm_al1" value="박성연"><br>
        별명2<input type="text" name="nm_al2" value="허내윤"><br>
        별명3<input type="text" name="nm_al3" value="조현수"><br>
        별명4<input type="text" name="nm_al4" value="조제리"><br>
        별명5<input type="text" name="nm_al5" value="조광어"><br>
        별명6<input type="text" name="nm_al6" value="먐먐먐"><br>
        별명7<input type="text" name="nm_al7" value="졸려와"><br>
        별명8<input type="text" name="nm_al8" value="호에엑">
    </form>
    <script>
        // ajax post 방식
        var v_xhr = new XMLHttpRequest();
        v_xhr.open("post", "0805check.php", true);
        // post 방식에서 data를 전송할 때는 send에 매개변수로 넘겨줌
        // application/x-www-form-urlencoded 는 디폴트(default)
        // multipart/form-data 는 파일 저장


        // post방식으로 ajax 실행하려면
        // 전송 encoding방식을 default 값으로 바꿔줘야 함. (send 전에)
        // FormData 생성자에 form 객체를 넘기면, 자동으로 name=value&name... 생성
        // FormData에 form을 넘기면 귀찮게 여러번 데이터를 전송하지 않아도 된다.
        var v_formData = new FormData(document.getElementById("id_form"));

        //var v_formData = new FormData();
        //v_formData.append("name", "이름 뜨지?")
        // api-key 받아서 data 서비스 받는 사이트는 header에
        // 그들만의 특별한 정보(인증을 위함)를 header에 쓰라고 하니
        // setRequestHeader 메소드를 잊지 맙시다.
        v_xhr.send(v_formData);
        // 위랑 아래랑 같음
        // v_xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        // v_xhr.send("name=lsy");



        v_xhr.onreadystatechange = function () {
            if (v_xhr.readyState == 4 && v_xhr.status == 200) {
                alert(v_xhr.responseText);
            }
        }

    </script>
</body>

</html>