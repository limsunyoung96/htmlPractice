<!DOCTYPE html>
<meta charset="utf-8">
<script>
    // 바뀌는 부분만 일반화 시키기. JSON 사용
    // 바뀌는 부분만 일반화를 시켜봅시다. JSON을 이용

    var $ = {};   // _ 와 $는 변수명으로 쓸 수 있음.
    $.ajax = function (p_json) {
        var v_ajax = new XMLHttpRequest();
        v_ajax.open(p_json.method, p_json.url, true);
        v_ajax.send();
        v_ajax.onreadystatechange = function () {
            if (v_ajax.readyState == 4 && v_ajax.status == 200) {
                p_json.success(v_ajax.responseText);
            }
        }
    }
    //만들었으니 확인해보기
    var p_data = {};
    p_data.method = "get";
    p_data.url = "data.csv";
    p_data.success = function (p_msg) {
        alert("흥" + p_msg);
    }
    $.ajax(p_data);

    $.ajax({
        "method": "get",
        "url": "test.php",
        "success": function (p_data) {
            alert("넘겨받은 값은:" + p_data + "입니당");
        }
    });


    /* 아래 항상쓰는 ajax 모양
    var v_ajax = new XMLHttpRequest();
    v_ajax.open("메소드", "URL", true);
    v_ajax.send("전달 값: get 방식일 때 비워두거나 null 씀");

    v_ajax.onreadystatechange = function () {
        if (v_ajax.readyState == 4 && v_ajax.status == 200) {
            // 받은 데이터 처리
            v_ajax.responseText
        }
    }
    */
</script>